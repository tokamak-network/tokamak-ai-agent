{
  "permissions": {
    "allow": [
      "Bash(npm install)",
      "Bash(npm run compile)",
      "Bash(wc -l:*)",
      "Bash(npx tsc:*)",
      "Bash(npm run bundle:*)",
      "Bash(grep:*)",
      "Bash(xxd:*)",
      "Bash(node --check:*)",
      "Bash(find /Users/harvey/Desktop/project/2026/trackB/tokamak-agent/src -name \"planner*\" -o -name \"plan*\" 2>/dev/null | head -20)",
      "Bash(python3 - << 'EOF'\nwith open\\('/Users/harvey/Desktop/project/2026/trackB/tokamak-agent/src/chat/chatPanel.ts', 'r'\\) as f:\n    lines = f.readlines\\(\\)\n\ntotal = len\\(lines\\)\n\n# Ranges to remove \\(0-based, inclusive\\):\n# 1. getSystemPromptForMode + parseFileOperations: indices 792-1173\n# 2. Skills methods \\(loadSkillsFromFolder through parseSlashCommand\\) + blank line: indices 2278-2374  \n# 3. getHtmlContent: indices 2386-4188\n\n# Do it in reverse order to avoid index shifting\n# First build the set of indices to keep\nremove_ranges = [\n    \\(792, 1173\\),  # getSystemPromptForMode + parseFileOperations\n    \\(2278, 2374\\), # skills methods\n    \\(2386, 4188\\), # getHtmlContent\n]\n\nkeep = set\\(range\\(total\\)\\)\nfor start, end in remove_ranges:\n    for i in range\\(start, end + 1\\):\n        keep.discard\\(i\\)\n\nnew_lines = [lines[i] for i in sorted\\(keep\\)]\n\nprint\\(f\"Original lines: {total}\"\\)\nprint\\(f\"Lines to remove: {total - len\\(new_lines\\)}\"\\)\nprint\\(f\"New total: {len\\(new_lines\\)}\"\\)\n\n# Sanity checks\nprint\\(\"\\\\nAround getSystemPromptForMode removal:\"\\)\n# Line around index 792 in new:\n# In original, line 792 = 'getSystemPromptForMode', line 791 = '\\\\n', line 1173 ends the section\n# After removal, lines 791 and 1174 should be adjacent\norig_791 = lines[791].rstrip\\(\\)\norig_1174 = lines[1174].rstrip\\(\\)\nprint\\(f\"  Before gap \\(orig 791\\): {orig_791}\"\\)\nprint\\(f\"  After gap \\(orig 1174\\): {orig_1174}\"\\)\n\nprint\\(\"\\\\nAround skills removal:\"\\)\norig_2277 = lines[2277].rstrip\\(\\)\norig_2375 = lines[2375].rstrip\\(\\)\nprint\\(f\"  Before gap \\(orig 2277\\): {orig_2277}\"\\)\nprint\\(f\"  After gap \\(orig 2375\\): {orig_2375}\"\\)\n\nprint\\(\"\\\\nAround getHtmlContent removal:\"\\)\norig_2385 = lines[2385].rstrip\\(\\)\norig_4189 = lines[4189].rstrip\\(\\) if 4189 < total else \"\\(EOF\\)\"\nprint\\(f\"  Before gap \\(orig 2385\\): {orig_2385}\"\\)\nprint\\(f\"  After gap \\(orig 4189\\): {orig_4189}\"\\)\n\nwith open\\('/Users/harvey/Desktop/project/2026/trackB/tokamak-agent/src/chat/chatPanel.ts', 'w'\\) as f:\n    f.writelines\\(new_lines\\)\n\nprint\\(f\"\\\\nFile written successfully with {len\\(new_lines\\)} lines\"\\)\nEOF)",
      "Bash(npm install --save-dev vitest@^2.0.0 @vitest/coverage-v8@^2.0.0 2>&1 | tail -5)",
      "Bash(npm test 2>&1)",
      "Bash(npm run compile 2>&1 && npm test 2>&1)"
    ]
  }
}
